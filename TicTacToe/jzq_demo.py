(lambda n:(lambda noe=[0]*(n*n),vaa=list('   a   b   c \n1    |   |   \n  ---|---|---\n2    |   |   \n  ---|---|---\n3    |   |   '),NoE=lambda NOE,Vaa,noe,vaa,NoE,VAA=lambda Vaa,noe,vaa,NoE,VAA,va=[],no=lambda v:{'a1':0,'a2':3,'a3':6,'b1':1,'b2':4,'b3':7,'c1':2,'c2':5,'c3':8}.get(input(v)):va.clear() or 1 and (Vaa==1 and (va.append(no("\nX's turn: ")) or 1) or Vaa==0 and (va.append(no("\nO's turn: ")) or 1)) and ((va[0]==None and (lambda NV:print(''.join([chr(x) for x in NV])+'\n') or 1)([32,32,32,97,32,32,32,98,32,32,32,99,32,10,49,32,32,78,32,124,32,111,32,124,32,69,32,10,32,32,45,45,45,124,45,45,45,124,45,45,45,10,50,32,32,86,32,124,32,97,32,124,32,32,32,10,32,32,45,45,45,124,45,45,45,124,45,45,45,10,51,32,32,32,32,124,32,32,32,124,32,97,32]) or noe[va[0]]!=0) and (NoE(1,Vaa,noe,vaa,NoE) or 1) or (noe.pop(va[0]) or 1) and (noe.insert(va[0],Vaa*2-1) or 1) and (vaa.pop([17,21,25,45,49,53,73,77,81][va[0]]) or 1) and (vaa.insert([17,21,25,45,49,53,73,77,81][va[0]],chr(111+9*Vaa)) or 1) and NoE((lambda nv:(lambda Nv:-3 in Nv and 2 or 3 in Nv and 3 or 0)(set([nv[i*3]+nv[i*3+1]+nv[i*3+2] for i in range(3)]+[nv[i]+nv[3+i]+nv[6+i] for i in range(3)]+[nv[0]+nv[4]+nv[8],nv[2]+nv[4]+nv[6]])) or 0 in set(nv) and 1 or 4)(noe),1-Vaa,noe,vaa,NoE)):(print(''.join(vaa)) or 1) and (NOE==1 and (VAA(Vaa,noe,vaa,NoE,VAA) or 1) or NOE==2 and print('O win')) or NOE==3 and print('X win') or NOE==4 and print('A draw'):NoE(1,1,noe,vaa,NoE))())(3)